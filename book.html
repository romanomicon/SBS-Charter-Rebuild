<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Book â€” Structure Editor</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/theme.css">
<link rel="stylesheet" href="css/base.css">
<link rel="stylesheet" href="css/book.css">
<link rel="stylesheet" href="css/mobile.css">
  <script>
    // Apply saved theme immediately
    const savedPreset = localStorage.getItem('themePreset') || 'grayscale';
    document.documentElement.setAttribute('data-preset', savedPreset);
  </script>
</head>

<body>
  <!-- Global nav -->
  <header class="global-nav">
    <div class="nav-inner">
      <div class="brand">Project Nehemiah</div>
      <nav class="nav-links">
        <a href="index.html">Home</a>
        <a href="settings.html">Settings</a>
        <a href="account.html">Account</a>
        <a href="library.html">Library</a>
      </nav>
    </div>
  </header>

  <main class="container book-page">
    <!-- Book Title with Save Button -->
    <div class="book-page-header">
      <h1 id="bookPageTitle" class="book-page-title">
        <!-- Book name will be inserted here by JS -->
      </h1>
      <div class="header-actions">
        <span id="saveStatus" class="save-status">âœ“ Saved</span>
        <span id="dirtyStatus" class="dirty-status">â— Unsaved changes</span>
        <button id="saveBookBtn" class="btn save-btn" title="Save this book">
          ğŸ’¾ Save</button>
      </div>
    </div>

    <!-- Book Info Row (title + key verse) -->
    <section id="bookInfoRow" class="book-info-row">
      <!-- Generated by JS -->
    </section>

    <!-- Two-column layout -->
    <section class="two-col">
      <!-- Left panel -->
      <aside id="leftPanel" class="left-panel">
        <div class="panel-header">Paragraph Titles</div>
        <div id="paragraphRows" class="paragraph-rows"></div>
      </aside>

      <!-- Right panel -->
      <aside id="rightPanel" class="right-panel">
        <div class="panel-header">
          <span>Structure</span>
          <div class="panel-actions">
            <button id="export-json" class="btn action-btn" title="Export structure as JSON (Beta)">
              JSON <span style="font-size: 0.65rem; opacity: 0.8;">BETA</span></button>
            <button id="export-preview" class="btn action-btn" title="Preview in browser - editable (Beta)">
              ğŸ‘ï¸ Preview <span style="font-size: 0.65rem; opacity: 0.8;">BETA</span></button>
            <button id="export-word" class="btn action-btn" title="Export structure as Word document (Beta)">
              Word <span style="font-size: 0.65rem; opacity: 0.8;">BETA</span></button>
          </div>
        </div>
        <div id="structureList" class="structure-list">
          <!-- Divisions / Sections / Segments -->
        </div>
      </aside>
    </section>

    <footer class="footer">
      Tip: paragraph titles can be edited and assigned to the structure with the buttons.
    </footer>
  </main>

  <!-- External dependency for Word export -->
  <script src="https://cdn.jsdelivr.net/npm/docx@7.3.0/build/index.js"></script>

  <!--<script src="js/export/exportWord.js"></script>

   Word export logic (adds window.exportWord)
  <script src="js/wordExport.js"></script> -->

  <!-- Application entry point (ES module) -->
  <script type="module" src="js/bookPage.js"></script>

</body>

</html>